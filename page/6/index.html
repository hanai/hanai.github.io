<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic%7CSource+Code+Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.ihanai.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqusjs","storage":true,"lazyload":true,"nav":null,"activeClass":"disqusjs"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":true,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="寒霭的部落格">
<meta property="og:url" content="https://blog.ihanai.com/page/6/index.html">
<meta property="og:site_name" content="寒霭的部落格">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Hanai">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.ihanai.com/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>寒霭的部落格</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106796055-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-106796055-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">寒霭的部落格</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">爱技术，爱生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tips"><a href="/categories/Tip/" rel="section"><i class="fa fa-tags fa-fw"></i>点滴</a></li><li class="menu-item menu-item-investment"><a href="/categories/Investment/" rel="section"><i class="fa fa-hand-holding-usd fa-fw"></i>投资</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-hashtag fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tools"><a href="/pages/tools/" rel="section"><i class="fa fa-toolbox fa-fw"></i>工具</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hanai</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">177</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hanai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hanai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ihanai1991@gmail.com" title="E-Mail → mailto:ihanai1991@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/vue-router-source-code-full-analysis-util.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/vue-router-source-code-full-analysis-util.html" class="post-title-link" itemprop="url">VueRouter 源码全解：util</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-15 07:13:43" itemprop="dateCreated datePublished" datetime="2017-12-15T07:13:43+08:00">2017-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>14 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="async-js"><a href="#async-js" class="headerlink" title="async.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/async.js">async.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

&#x2F;&#x2F; 定义一个函数 runQueue。这个函数接受一个参数列表 queue，一个函数 fn，一个回调 cb。它会对 queue 中的每一项依次调用 fn，并在最后结束时调用回调函数 cb
export function runQueue (queue: Array&lt;?NavigationGuard&gt;, fn: Function, cb: Function) &#123;
  const step &#x3D; index &#x3D;&gt; &#123;
    if (index &gt;&#x3D; queue.length) &#123;
      cb()
    &#125; else &#123;
      if (queue[index]) &#123;
        fn(queue[index], () &#x3D;&gt; &#123;
          step(index + 1)
        &#125;)
      &#125; else &#123;
        step(index + 1)
      &#125;
    &#125;
  &#125;
  step(0)
&#125;</code></pre>

<h3 id="dom-js"><a href="#dom-js" class="headerlink" title="dom.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/dom.js">dom.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

&#x2F;&#x2F; 根据是否有全局变量 &#96;window&#96; 判断当前运行环境
export const inBrowser &#x3D; typeof window !&#x3D;&#x3D; &#39;undefined&#39;</code></pre>

<h3 id="path-js"><a href="#path-js" class="headerlink" title="path.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/path.js">path.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

&#x2F;&#x2F; 将 relative 与 base 合成完整路径
export function resolvePath (
  relative: string,
  base: string,
  append?: boolean
): string &#123;
  const firstChar &#x3D; relative.charAt(0)
  if (firstChar &#x3D;&#x3D;&#x3D; &#39;&#x2F;&#39;) &#123;
    return relative
  &#125;

  if (firstChar &#x3D;&#x3D;&#x3D; &#39;?&#39; || firstChar &#x3D;&#x3D;&#x3D; &#39;#&#39;) &#123;
    return base + relative
  &#125;

  const stack &#x3D; base.split(&#39;&#x2F;&#39;)

  &#x2F;&#x2F; remove trailing segment if:
  &#x2F;&#x2F; - not appending
  &#x2F;&#x2F; - appending to trailing slash (last segment is empty)
  if (!append || !stack[stack.length - 1]) &#123;
    stack.pop()
  &#125;

  &#x2F;&#x2F; resolve relative path
  const segments &#x3D; relative.replace(&#x2F;^\&#x2F;&#x2F;, &#39;&#39;).split(&#39;&#x2F;&#39;)
  for (let i &#x3D; 0; i &lt; segments.length; i++) &#123;
    const segment &#x3D; segments[i]
    if (segment &#x3D;&#x3D;&#x3D; &#39;..&#39;) &#123;
      stack.pop()
    &#125; else if (segment !&#x3D;&#x3D; &#39;.&#39;) &#123;
      stack.push(segment)
    &#125;
  &#125;

  &#x2F;&#x2F; ensure leading slash
  if (stack[0] !&#x3D;&#x3D; &#39;&#39;) &#123;
    stack.unshift(&#39;&#39;)
  &#125;

  return stack.join(&#39;&#x2F;&#39;)
&#125;

&#x2F;&#x2F; 将传入的 path 分成 path, query, hash 三部分
export function parsePath (path: string): &#123;
  path: string;
  query: string;
  hash: string;
&#125; &#123;
  let hash &#x3D; &#39;&#39;
  let query &#x3D; &#39;&#39;

  const hashIndex &#x3D; path.indexOf(&#39;#&#39;)
  if (hashIndex &gt;&#x3D; 0) &#123;
    hash &#x3D; path.slice(hashIndex)
    path &#x3D; path.slice(0, hashIndex)
  &#125;

  const queryIndex &#x3D; path.indexOf(&#39;?&#39;)
  if (queryIndex &gt;&#x3D; 0) &#123;
    query &#x3D; path.slice(queryIndex + 1)
    path &#x3D; path.slice(0, queryIndex)
  &#125;

  return &#123;
    path,
    query,
    hash
  &#125;
&#125;

&#x2F;&#x2F; 将传入 path 中的 &#x2F;&#x2F; 替换成 &#x2F;
export function cleanPath (path: string): string &#123;
  return path.replace(&#x2F;\&#x2F;\&#x2F;&#x2F;g, &#39;&#x2F;&#39;)
&#125;</code></pre>

<h3 id="params-js"><a href="#params-js" class="headerlink" title="params.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/params.js">params.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

import &#123; warn &#125; from &#39;.&#x2F;warn&#39;
import Regexp from &#39;path-to-regexp&#39;  &#x2F;&#x2F; path-to-regexp 用来将 &#96;&#x2F;user&#x2F;:name&#96; 这样的字符串转换成正则表达式

&#x2F;&#x2F; $flow-disable-line
const regexpCompileCache: &#123;
  [key: string]: Function
&#125; &#x3D; Object.create(null)

&#x2F;&#x2F; 将 params 中的对应的参数填入 path 中，返回填充后的路径
export function fillParams (
  path: string,
  params: ?Object,
  routeMsg: string
): string &#123;
  try &#123;
    const filler &#x3D;
      regexpCompileCache[path] ||
      (regexpCompileCache[path] &#x3D; Regexp.compile(path))
    return filler(params || &#123;&#125;, &#123; pretty: true &#125;)
  &#125; catch (e) &#123;
    if (process.env.NODE_ENV !&#x3D;&#x3D; &#39;production&#39;) &#123;
      warn(false, &#96;missing param for $&#123;routeMsg&#125;: $&#123;e.message&#125;&#96;)
    &#125;
    return &#39;&#39;
  &#125;
&#125;</code></pre>

<h3 id="query-js"><a href="#query-js" class="headerlink" title="query.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/query.js">query.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

import &#123; warn &#125; from &#39;.&#x2F;warn&#39;

const encodeReserveRE &#x3D; &#x2F;[!&#39;()*]&#x2F;g
const encodeReserveReplacer &#x3D; c &#x3D;&gt; &#39;%&#39; + c.charCodeAt(0).toString(16)
const commaRE &#x3D; &#x2F;%2C&#x2F;g

&#x2F;&#x2F; 使 encodeURIComponent 更符合 RFC3986 标准
&#x2F;&#x2F; - 转义 [!&#39;()*]
&#x2F;&#x2F; - 保留逗号
const encode &#x3D; str &#x3D;&gt; encodeURIComponent(str)
  .replace(encodeReserveRE, encodeReserveReplacer)
  .replace(commaRE, &#39;,&#39;)

const decode &#x3D; decodeURIComponent

&#x2F;&#x2F; 根据 query 字符串与 extraQuery 键值对生成键值对
export function resolveQuery (
  query: ?string,
  extraQuery: Dictionary&lt;string&gt; &#x3D; &#123;&#125;,
  _parseQuery: ?Function
): Dictionary&lt;string&gt; &#123;
  const parse &#x3D; _parseQuery || parseQuery
  let parsedQuery
  try &#123;
    parsedQuery &#x3D; parse(query || &#39;&#39;)
  &#125; catch (e) &#123;
    process.env.NODE_ENV !&#x3D;&#x3D; &#39;production&#39; &amp;&amp; warn(false, e.message)
    parsedQuery &#x3D; &#123;&#125;
  &#125;
  for (const key in extraQuery) &#123;
    parsedQuery[key] &#x3D; extraQuery[key]
  &#125;
  return parsedQuery
&#125;

&#x2F;&#x2F; 将 query 字符串转换成键值对
function parseQuery (query: string): Dictionary&lt;string&gt; &#123;
  const res &#x3D; &#123;&#125;

  query &#x3D; query.trim().replace(&#x2F;^(\?|#|&amp;)&#x2F;, &#39;&#39;)

  if (!query) &#123;
    return res
  &#125;

  query.split(&#39;&amp;&#39;).forEach(param &#x3D;&gt; &#123;
    const parts &#x3D; param.replace(&#x2F;\+&#x2F;g, &#39; &#39;).split(&#39;&#x3D;&#39;)
    const key &#x3D; decode(parts.shift())
    const val &#x3D; parts.length &gt; 0
      ? decode(parts.join(&#39;&#x3D;&#39;))
      : null

    if (res[key] &#x3D;&#x3D;&#x3D; undefined) &#123;
      res[key] &#x3D; val
    &#125; else if (Array.isArray(res[key])) &#123;
      res[key].push(val)
    &#125; else &#123;
      res[key] &#x3D; [res[key], val]
    &#125;
  &#125;)

  return res
&#125;

&#x2F;&#x2F; 将 query 键值对 encode，然后转成 &#96;?key1&#x3D;val1&amp;key2&#x3D;val2 这样的字符串
export function stringifyQuery (obj: Dictionary&lt;string&gt;): string &#123;
  const res &#x3D; obj ? Object.keys(obj).map(key &#x3D;&gt; &#123;
    const val &#x3D; obj[key]

    if (val &#x3D;&#x3D;&#x3D; undefined) &#123;
      return &#39;&#39;
    &#125;

    if (val &#x3D;&#x3D;&#x3D; null) &#123;
      return encode(key)
    &#125;

    if (Array.isArray(val)) &#123;
      const result &#x3D; []
      val.forEach(val2 &#x3D;&gt; &#123;
        if (val2 &#x3D;&#x3D;&#x3D; undefined) &#123;
          return
        &#125;
        if (val2 &#x3D;&#x3D;&#x3D; null) &#123;
          result.push(encode(key))
        &#125; else &#123;
          result.push(encode(key) + &#39;&#x3D;&#39; + encode(val2))
        &#125;
      &#125;)
      return result.join(&#39;&amp;&#39;)
    &#125;

    return encode(key) + &#39;&#x3D;&#39; + encode(val)
  &#125;).filter(x &#x3D;&gt; x.length &gt; 0).join(&#39;&amp;&#39;) : null
  return res ? &#96;?$&#123;res&#125;&#96; : &#39;&#39;
&#125;</code></pre>

<h3 id="location-js"><a href="#location-js" class="headerlink" title="location.js"></a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-router/blob/v3.0.1/src/util/location.js">location.js</a></h3><pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;* @flow *&#x2F;

import type VueRouter from &#39;..&#x2F;index&#39;
import &#123; parsePath, resolvePath &#125; from &#39;.&#x2F;path&#39;
import &#123; resolveQuery &#125; from &#39;.&#x2F;query&#39;
import &#123; fillParams &#125; from &#39;.&#x2F;params&#39;
import &#123; warn &#125; from &#39;.&#x2F;warn&#39;

export function normalizeLocation (
  raw: RawLocation,
  current: ?Route,
  append: ?boolean,
  router: ?VueRouter
): Location &#123;
  let next: Location &#x3D; typeof raw &#x3D;&#x3D;&#x3D; &#39;string&#39; ? &#123; path: raw &#125; : raw
  &#x2F;&#x2F; named target
  if (next.name || next._normalized) &#123;
    return next
  &#125;

  &#x2F;&#x2F; relative params
  if (!next.path &amp;&amp; next.params &amp;&amp; current) &#123;
    next &#x3D; assign(&#123;&#125;, next)
    next._normalized &#x3D; true
    const params: any &#x3D; assign(assign(&#123;&#125;, current.params), next.params)
    if (current.name) &#123;
      next.name &#x3D; current.name
      next.params &#x3D; params
    &#125; else if (current.matched.length) &#123;
      const rawPath &#x3D; current.matched[current.matched.length - 1].path
      next.path &#x3D; fillParams(rawPath, params, &#96;path $&#123;current.path&#125;&#96;)
    &#125; else if (process.env.NODE_ENV !&#x3D;&#x3D; &#39;production&#39;) &#123;
      warn(false, &#96;relative params navigation requires a current route.&#96;)
    &#125;
    return next
  &#125;

  const parsedPath &#x3D; parsePath(next.path || &#39;&#39;)
  const basePath &#x3D; (current &amp;&amp; current.path) || &#39;&#x2F;&#39;
  const path &#x3D; parsedPath.path
    ? resolvePath(parsedPath.path, basePath, append || next.append)
    : basePath

  const query &#x3D; resolveQuery(
    parsedPath.query,
    next.query,
    router &amp;&amp; router.options.parseQuery
  )

  let hash &#x3D; next.hash || parsedPath.hash
  if (hash &amp;&amp; hash.charAt(0) !&#x3D;&#x3D; &#39;#&#39;) &#123;
    hash &#x3D; &#96;#$&#123;hash&#125;&#96;
  &#125;

  return &#123;
    _normalized: true,
    path,
    query,
    hash
  &#125;
&#125;

function assign (a, b) &#123;
  for (const key in b) &#123;
    a[key] &#x3D; b[key]
  &#125;
  return a
&#125;</code></pre>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/statistical-basics-2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/statistical-basics-2.html" class="post-title-link" itemprop="url">统计基础 2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-13 14:58:52" itemprop="dateCreated datePublished" datetime="2017-12-13T14:58:52+08:00">2017-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>420</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="归一化"><a href="#归一化" class="headerlink" title="归一化"></a>归一化</h3><h4 id="Z值（Z-score）"><a href="#Z值（Z-score）" class="headerlink" title="Z值（Z score）"></a>Z值（Z score）</h4><p>标准值（Standard Score）：给定一个观察值 x，Z 值表示 x 偏离均值多少个标准差。</p>
<p>$$ Z &#x3D; \frac{x - \mu}{\sigma} $$</p>
<p>标准正态曲线（Standard Normal Curve）：标准正态曲线是归一化的结果。我们使用这个分布与 Z 值表来计算给定值之上、之下、之间的百分比。</p>
<p><img src="/images/2017/12/std-normal-curve.png" alt="The Standard Normal Curve"></p>
<h3 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h3><h4 id="概率分布函数（Probability-Distribution-Function）"><a href="#概率分布函数（Probability-Distribution-Function）" class="headerlink" title="概率分布函数（Probability Distribution Function）"></a>概率分布函数（Probability Distribution Function）</h4><p>概率分布函数（PDF）是一个下面面积为 1 的正态曲线，用来表示值的累积频率。</p>
<p><img src="/images/2017/12/curve-area-1.png" alt="the area beneath the curve is 1"></p>
<h5 id="使用-Z-值表找出概率"><a href="#使用-Z-值表找出概率" class="headerlink" title="使用 Z 值表找出概率"></a>使用 Z 值表找出概率</h5><p>例：某私立大学学生的平均身高是 1.85m，标准差为 0.15m。求身高低于 2.05m 的学生的比例。</p>
<p><img src="/images/2017/12/curve-area-85.png" alt="85% is the shaded area"></p>
<p>解决此题要先计算出 Z 值：$$ z &#x3D; \frac{x - \mu}{\sigma} &#x3D; \frac{2.05 - 1.85}{0.15} &#x3D; 1.\bar{3} $$</p>
<p>然后从 Z 值表中找出 Z 值低于 1.33 的比例。</p>
<p>如图：</p>
<p><img src="/images/2017/12/z-table.png" alt="z-table"></p>
<p>查表得 $90.82\%$</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/magic-modify-sw-precache.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/magic-modify-sw-precache.html" class="post-title-link" itemprop="url">魔改 sw-precache</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-13 06:59:59" itemprop="dateCreated datePublished" datetime="2017-12-13T06:59:59+08:00">2017-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>sw-precache</code> 是一个用来生成预加载资源的 ServiceWorker 的 js 文件的模块。将它用到 Ghost 上后，发现它并不能正常工作，原来 Ghost 会自动给 <code>asset</code> 中的静态文件加上 <code>?v=#######</code>，而 sw-precache 里记录的是原始的文件名，并不匹配。所以对 sw.js 修改了一下。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;&#x2F; sw.js

var url &#x3D; event.request.url;
if (&#x2F;\.(js|css)(\?|$)&#x2F;.test(url) &amp;&amp; &#x2F;^https?:\&#x2F;\&#x2F;(blog\.ihanai\.com|cdnjs\.cloudflare\.com)&#x2F;.test(url)) &#123;
  event.respondWith(
    caches.open(cacheName).then(function (cache) &#123;
      return setOfCachedUrls(cache).then(function (cachedUrls) &#123;
        &#x2F;&#x2F; If we don&#39;t have a key matching url in the cache already, add it.
        var cacheKey &#x3D; event.request.url;
        if (!cachedUrls.has(cacheKey)) &#123;
          return fetch(event.request).then(function (response) &#123;
            if (response.ok || response.type &#x3D;&#x3D;&#x3D; &#39;opaque&#39;) &#123;
              cleanResponse(response).then(function (responseToCache) &#123;
                return cache.put(cacheKey, responseToCache);
              &#125;);
            &#125;
            return response.clone();
          &#125;);
        &#125; else &#123;
          return cache.match(cacheKey).then(function (response) &#123;
              if (response) return response;
              throw Error(&#39;The cached response that was expected is missing.&#39;);
            &#125;)
            .catch(function (e) &#123;
              console.warn(&#39;Couldn\&#39;t serve response for &quot;%s&quot; from cache: %O&#39;, event.request.url, e);
              return fetch(event.request);
            &#125;);
        &#125;
      &#125;);
    &#125;)
  );
&#125;</code></pre>

<p>这里有点需要注意的是使用 <code>response.clone()</code> 避免 TypeError。</p>
<p>当然，这样改了之后，功能变了，由原来的预加载资源文件变成了将部分文件使用 ServiceWorker 作缓存了。</p>
<p>最简单的方法还是修改 sw-precache 的配置，增加 <code>ignoreUrlParametersMatching: [/^utm_/, /^v$/]</code>，这样 <code>sw-precache</code> 就能忽略 assetHash 了。由于生成的 <code>sw.js</code> 文件里有对资源 hash 的记录，所以忽略 Ghost 生成的 assetHash 并不会有什么不好的影响。</p>
<p>说点其它的，使用上面所说的方法将所以 js、css 资源文件用 ServiceWorker 缓存之后发现较 from disk cache 变慢了，原因在于随着 fetch 事件触发次数的增加，sw.js 中的一些代码如 <code>setOfCachedUrls</code>、<code>caches.open</code> 执行了一次又一次，很多结果是相同的，但是并没有缓存，所以实际使用中可以考虑对其进行定制化修改。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/statistical-basics-1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/statistical-basics-1.html" class="post-title-link" itemprop="url">统计基础 1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-09 15:59:16" itemprop="dateCreated datePublished" datetime="2017-12-09T15:59:16+08:00">2017-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="统计研究方法入门"><a href="#统计研究方法入门" class="headerlink" title="统计研究方法入门"></a>统计研究方法入门</h3><h4 id="建构"><a href="#建构" class="headerlink" title="建构"></a>建构</h4><p>建构（Constructs，即抽象概念）：建构是任何难以衡量的东西，因为它可以用许多不同的方式来定义和衡量。</p>
<p>操作定义（Operational Definition）：建构的操作定义是我们用于度量建构的单位。 一旦我们在操作上定义了一些东西，它就不再是一个建构。</p>
<p>例：容量是一个建构。我们知道容量是某物占据的空间，但我们还没有定义如何度量这个空间（即升、加仑等）。当我们要用<em>升</em>来度量容量的时候，它不再是一个建构，而是操作定义。</p>
<p>例：分钟已被操作定义了，我们正在测量的东西没有含糊之处。</p>
<h4 id="总体与样本"><a href="#总体与样本" class="headerlink" title="总体与样本"></a>总体与样本</h4><p>总体（Population）：一个群体中的所有个体。<br>样本（Sample）：一个群体中的部分个体。</p>
<p>参数（Parameter）与统计值（Statistic）：参数定义总体的特征，统计值定义样本的特征。</p>
<p>例：总体的平均值用符号 $\mu$ 定义，样本的平均值用 $\bar x$ 定义。</p>
<h4 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h4><p>治疗组（Treatment Group）：接受不同程度自变量的研究小组，这些小组被用来衡量治疗的效果。</p>
<p>对照组（Control Group）：一个没有得到任何治疗的研究小组。这个组被用作比较治疗组的基线。</p>
<p>安慰剂（Placebo）：给对照组的受试者一些东西，让他们认为他们正在接受治疗，而实际上他们正在得到一些对他们没有任何影响的东西。（例如糖丸）</p>
<p>盲法（Blinding）：盲法是一种用来减少偏见的技术。双盲法可确保执行治疗和接受治疗的患者不知道接受哪种治疗。</p>
<hr>
<h3 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h3><h4 id="频率"><a href="#频率" class="headerlink" title="频率"></a>频率</h4><p>频率（Frequency）：数据集的频率是某个结果发生的次数。</p>
<p><img src="/images/2017/12/histogram.jpg" alt="histogram"></p>
<p>这个直方图显示从 0-5 学生测试的分数。我们看到没有学生得 0 分，8 名学生得 1 分。这些数字就是学生成绩的频率。</p>
<p>比例（Proportion）：比例是计数除以总样本的分数。比例可以通过乘以 100 来变成百分数。</p>
<p>例：使用上面的直方图，我们可以看出得 1 分学生的比例为 $\frac{8}{39} \approx 0.2051$ 或 $20.51\%$</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/12/statistical-basics-1.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/assumptions-for-the-t-test.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/assumptions-for-the-t-test.html" class="post-title-link" itemprop="url">[译] t 检验的前提假设</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-09 15:19:40" itemprop="dateCreated datePublished" datetime="2017-12-09T15:19:40+08:00">2017-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>324</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>双自变量（A、B 两组）</li>
<li>连续的因变量</li>
<li>每个因变量的观察值独立于其他因变量的观察值（其概率分布不受其值影响）。例外：对于相依样本 t 检验（paired t-test），我们只需要每对的差异（$\mathrm A_i - \mathrm B_i$）彼此独立</li>
<li>因变量服从正态分布，在每组中具有相同的方差 $\sigma^2$（就好像组 $\mathrm A$ 的分布仅仅被移动而成为组 $\mathrm B$ 的分布，而不改变形状）</li>
</ul>
<p><img src="/images/2017/12/normal-sigma.gif" alt="normal-sigma"></p>
<p>注：正态分布的标度参数 $\sigma$ 也称为总体标准偏差，在正态曲线的图片上很容易看到。$\sigma$ 位于正常平均值的左侧或右侧的曲线从凸面变为凹面（二阶导数为零）的位置。</p>
<hr>
<p><a target="_blank" rel="noopener" href="http://www.csic.cornell.edu/Elrod/t-test/t-test-assumptions.html">Cornell CSIC Elrod: Assumptions for the t-test</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/latex-mathematical-notation-starter.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/latex-mathematical-notation-starter.html" class="post-title-link" itemprop="url">[译] LaTeX 数学公式快速入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-06 02:38:56" itemprop="dateCreated datePublished" datetime="2017-12-06T02:38:56+08:00">2017-12-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h3><p>LaTeX 的书写有两种模式：inline 与 display。inline 表达式与文字渲染在行内，而 display 表达式独占一行。</p>
<p>inline 模式的表达式：$e^{i\pi} + 1 &#x3D; 0$</p>
<p>display 模式的表达式：$$e^x &#x3D; \sum_{n&#x3D;0}^\infty \frac{x^n}{n!}$$</p>
<p>写 inline 表达式时，要使用单个 $ 符号，<code>$y=mx+b$</code> 输出 $y&#x3D;mx+b$。创建 display 表达式时，使用两个 $ 符号，<code>$$P(A\mid B) = \frac&#123;P(B\mid A)P(A)&#125;&#123;P(B)&#125;$$</code> 输出 $$P(A\mid B) &#x3D; \frac{P(B\mid A)P(A)}{P(B)}$$</p>
<h3 id="上标下标"><a href="#上标下标" class="headerlink" title="上标下标"></a>上标下标</h3><p><code>$x^2$</code> $x^2$</p>
<p><code>$e^2x$</code> $e^2x$</p>
<p><code>$e^&#123;2x&#125;$</code> $e^{2x}$</p>
<p><code>$x_i$</code> $x_i$</p>
<p><code>$_&#123;10&#125;C_5</code> $_{10}C_5$</p>
<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><p>特殊符号与格式使用指令书写，写作 <code>\command</code>。例如：创建一个平方根的根号，<code>$\sqrt&#123;2\pi&#125;$</code> 生成 $\sqrt{2\pi}$。<code>&#123;&#125;</code> 包裹根号下的内容，<code>\pi</code> 渲染出希腊字母 pi($\pi$)。分数使用 <code>\frac</code> 命令显示，它接受两个分别被括号包裹的输入值，一个是分子，一个是分母。</p>
<h3 id="符号"><a href="#符号" class="headerlink" title="符号"></a>符号</h3><p>符号以 <code>\symbol</code> 书写。</p>
<ul>
<li>希腊字母 <code>\alpha</code>, <code>\beta</code>, <code>\gamma</code>：$\alpha$, $\beta$, $\gamma$。大写 <code>\Phi</code>, <code>\Gamma</code>：$\Phi$, $\Gamma$。由于 beta 的大写形式就是 $\mathrm{B}$，所以没有 <code>\Beta</code>。</li>
<li>操作符 <code>\times</code>, <code>\pm</code>, <code>\cup</code>, <code>\oplus</code>：$\times$, $\pm$, $\cup$, $\oplus$</li>
<li>三角函数 <code>\sin</code>, <code>\cosh</code>, <code>\arctan</code>：$\sin$, $\cosh$, $\arctan$</li>
<li>关系 <code>\leq</code>, <code>\geq</code>, <code>\approx</code>, <code>\neq</code>：$\leq$, $\geq$, $\approx$, $\neq$</li>
<li>三点 <code>\cdots</code>, <code>\ldots</code>, <code>\ddots</code>：$\cdots$, $\ldots$, $\ddots$</li>
<li>其它 <code>\infty</code>, <code>\nabla</code>, <code>\partial</code>：$\infty$, $\nabla$, $\partial$</li>
</ul>
<h3 id="撇号"><a href="#撇号" class="headerlink" title="撇号"></a>撇号</h3><ul>
<li>加一个 hat <code>\hat x</code> $\hat x$，给多个字母加 hat <code>\widehat&#123;abs&#125;</code> $\widehat{abs}$</li>
<li>加一个 bar <code>\bar x</code> $\bar x$，给多个字母加 bar <code>\overline&#123;abs&#125;</code> $\overline{abs}$</li>
<li>小圆点 <code>\dot x</code> $\dot x$, <code>\ddot x</code> $\ddot x$</li>
<li>箭头 <code>\vec&#123;x&#125;</code> $\vec{x}$, <code>\overrightarrow&#123;xy&#125;</code> $\overrightarrow{xy}$</li>
</ul>
<h3 id="圆括号、方括号和花括号"><a href="#圆括号、方括号和花括号" class="headerlink" title="圆括号、方括号和花括号"></a>圆括号、方括号和花括号</h3><p>圆括号和方括号默认是没有『弹性』的，也就是说它们不会延伸达到内容完整的高度，例如 <code>z = (\frac&#123;dx&#125;&#123;dy&#125;)^&#123;1/3&#125;</code>：</p>
<p>$$<br>z &#x3D; (\frac{dx}{dy})^{1&#x2F;3}<br>$$</p>
<p>为了使括号延伸，要使用 <code>\left</code> 和 <code>\right</code>，如 <code>$$z = \left(\frac&#123;dx&#125;&#123;dy&#125;\right)^&#123;1/3&#125;$$</code>：</p>
<p>$$<br>z &#x3D; \left(\frac{dx}{dy}\right)^{1&#x2F;3}<br>$$</p>
<p>还有一些无法用键盘创建的特殊的括号。</p>
<ul>
<li>使用 <code>|</code> 或 <code>\vert</code> 的垂直线，如 $|x|$ 或 $\vert x \vert $。使用 <code>\mid</code> 作括号中间的线。$P(A\vert B)$ 使用 <code>\vert</code>，而 $P(A\mid B)$，使用 <code>\mid</code></li>
<li>尖括号：<code>$\langle \phi \mid \psi \rangle$</code> 输出 $\langle \phi \mid \psi \rangle$</li>
<li>矩阵的组括号：<code>\left\lgroup \matrix&#123;a &amp; b\cr c &amp; d&#125; \right\rgroup</code> $$\left\lgroup \matrix{a &amp; b\cr c &amp; d} \right\rgroup$$</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/12/latex-mathematical-notation-starter.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/manage-nodejs-project-with-docker-compose.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/manage-nodejs-project-with-docker-compose.html" class="post-title-link" itemprop="url">使用 docker-compose 管理 Node.js 项目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-02 16:24:52" itemprop="dateCreated datePublished" datetime="2017-12-02T16:24:52+08:00">2017-12-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>实际开发中，项目会在多种环境中运行，如 <code>local</code>、<code>dev</code> 或者 <code>test</code> 等。我们可以依据不同的运行环境进行配置，使用 <code>docker-compose</code> 来更方便的部署应用。</p>
<p>项目结构</p>
<pre class="line-numbers language-none"><code class="language-none">.
├── Dockerfile
├── README.md
├── config
│   ├── config.default.js
│   ├── config.dev.js
│   ├── config.local.js
│   ├── config.prod.js
│   ├── config.sandbox.js
│   ├── config.test.js
├── docker-compose.yml
├── env
│   ├── common.env
│   ├── dev.env
│   ├── local.env
│   ├── prod.env
│   ├── sandbox.env
│   └── test.env
├── package.json
├── view
└── yarn.lock</code></pre>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><pre class="line-numbers language-docker" data-language="docker"><code class="language-docker"># Dockerfile
FROM node:8-alpine
ADD . &#x2F;code
WORKDIR &#x2F;code
RUN yarn install</code></pre>

<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"># docker-compose.yml
version: &#39;2.1&#39;
services:
  app-local:
    env_file:
      - .&#x2F;env&#x2F;common.env
      - .&#x2F;env&#x2F;local.env
    build:
      context: .
      args:
        NPM_REGISTRY: &quot;https:&#x2F;&#x2F;registry.npm.taobao.org&quot;
    ports:
      - &quot;7005:7005&quot;
    depends_on:
      - redis
    links:
      - redis
    volumes:
      - - &#x2F;path&#x2F;to&#x2F;view:&#x2F;code&#x2F;view
      - .&#x2F;app:&#x2F;code&#x2F;app
    command: [&quot;npm&quot;, &quot;run&quot;, &quot;dev&quot;]
  app-dev:
    env_file:
      - .&#x2F;env&#x2F;common.env
      - .&#x2F;env&#x2F;dev.env
    build:
      context: .
      args:
        NPM_REGISTRY: &quot;https:&#x2F;&#x2F;registry.npm.taobao.org&quot;
    ports:
      - &quot;7005:7005&quot;
    depends_on:
      - redis
    links:
      - redis
    volumes:
      - - &#x2F;path&#x2F;to&#x2F;view:&#x2F;code&#x2F;view
    command: [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
  app-test:
    env_file:
      - .&#x2F;env&#x2F;common.env
      - .&#x2F;env&#x2F;test.env
    build:
      context: .
      args:
        NPM_REGISTRY: &quot;https:&#x2F;&#x2F;registry.npm.taobao.org&quot;
    ports:
      - &quot;7005:7005&quot;
    depends_on:
      - redis
    links:
      - redis
    volumes:
      - &#x2F;path&#x2F;to&#x2F;view:&#x2F;code&#x2F;view
    command: [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
  app-sandbox:
    env_file:
      - .&#x2F;env&#x2F;common.env
      - .&#x2F;env&#x2F;sandbox.env
    build:
      context: .
      args:
        NPM_REGISTRY: &quot;https:&#x2F;&#x2F;registry.npm.taobao.org&quot;
    ports:
      - &quot;7005:7005&quot;
    depends_on:
      - redis
    links:
      - redis
    volumes:
      - &#x2F;path&#x2F;to&#x2F;view:&#x2F;code&#x2F;view
    command: [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
  app-prod:
    env_file:
      - .&#x2F;env&#x2F;common.env
      - .&#x2F;env&#x2F;prod.env
    build:
      context: .
      args:
        NPM_REGISTRY: &quot;https:&#x2F;&#x2F;registry.npm.taobao.org&quot;
    ports:
      - &quot;7005:7005&quot;
    volumes:
      - &#x2F;code&#x2F;view
    command: [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
  redis:
    image: redis:3.2-alpine
    expose:
      - &quot;6379&quot;</code></pre>

<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>build 镜像</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker-compose build app-local
$ docker-compose build app-dev
$ docker-compose build app-prod</code></pre>

<p>运行</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker-compose up -d app-local
$ docker-compose up -d app-dev
$ docker-compose up -d app-prod</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/ubuntu-enable-bbr-quickly.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/ubuntu-enable-bbr-quickly.html" class="post-title-link" itemprop="url">Ubuntu 快速启用 BBR</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-02 09:04:00" itemprop="dateCreated datePublished" datetime="2017-12-02T09:04:00+08:00">2017-12-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>433</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>网上看到好多开启 BBR 的方法都是从源码编译 Linux 内核，然而现在一些发行版的 <code>tcp_bbr</code> module 已是直接可用的，所以只需在 <code>/etc/sysctl.conf</code> 中启用即可。</p>
<p>判断是否有已编译好的 <code>tcp_bbr</code> 模块</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ find &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F; -iname &quot;*bbr*&quot;
&#x2F;lib&#x2F;modules&#x2F;4.10.0-40-generic&#x2F;kernel&#x2F;net&#x2F;ipv4&#x2F;tcp_bbr.ko</code></pre>

<p>在 <code>/etc/sysctl.conf</code> 中启用 BBR</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ sudo bash -c &#39;echo &quot;net.ipv4.tcp_congestion_control&#x3D;bbr&quot; &gt;&gt; &#x2F;etc&#x2F;sysctl.conf&#39;</code></pre>

<p>应用变动</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ sudo sysctl -p</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/12/react-components-elements-instances.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/react-components-elements-instances.html" class="post-title-link" itemprop="url">[译] React Components, Elements, and Instances</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-02 06:14:58" itemprop="dateCreated datePublished" datetime="2017-12-02T06:14:58+08:00">2017-12-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="管理实例"><a href="#管理实例" class="headerlink" title="管理实例"></a>管理实例</h3><p>在传统的 UI 模型中，由你管理子组件实例的创建销毁。如果有个 <code>From</code> 想要渲染一个 <code>Button</code> 组件，它需要创建它的实例，并手动根据新的数据更新。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">class Form extends TraditionalObjectOrientedView &#123;
  render() &#123;
    &#x2F;&#x2F; Read some data passed to the view
    const &#123; isSubmitted, buttonText &#125; &#x3D; this.attrs;

    if (!isSubmitted &amp;&amp; !this.button) &#123;
      &#x2F;&#x2F; Form is not yet submitted. Create the button!
      this.button &#x3D; new Button(&#123;
        children: buttonText,
        color: &#39;blue&#39;
      &#125;);
      this.el.appendChild(this.button.el);
    &#125;

    if (this.button) &#123;
      &#x2F;&#x2F; The button is visible. Update its text!
      this.button.attrs.children &#x3D; buttonText;
      this.button.render();
    &#125;

    if (isSubmitted &amp;&amp; this.button) &#123;
      &#x2F;&#x2F; Form was submitted. Destroy the button!
      this.el.removeChild(this.button.el);
      this.button.destroy();
    &#125;

    if (isSubmitted &amp;&amp; !this.message) &#123;
      &#x2F;&#x2F; Form was submitted. Show the success message!
      this.message &#x3D; new Message(&#123; text: &#39;Success!&#39; &#125;);
      this.el.appendChild(this.message.el);
    &#125;
  &#125;
&#125;</code></pre>

<p>每一个组件的实例都需要保存它的 DOM 节点以及子组件的实例，并在合适的时间创建、更新、销毁它们。代码行数随着组件可能的状态增多增长的很快，并且父组件可以直接访问子组件的实例，使得未来很难将它们解耦。</p>
<p>那么 React 有什么不同呢？</p>
<hr>
<h3 id="使用-Element-描述树状结构"><a href="#使用-Element-描述树状结构" class="headerlink" title="使用 Element 描述树状结构"></a>使用 Element 描述树状结构</h3><p><code>Element</code> 是描述组件实例或者 DOM 节点及其属性的 plain 对象。一个 Element 并不是实例，不能从它调用任何方法。它有两个字段 <code>type: (string | ReactClass)</code> 和 <code>props: Object</code>。</p>
<h4 id="DOM-Elements"><a href="#DOM-Elements" class="headerlink" title="DOM Elements"></a>DOM Elements</h4><p>当 element 的 <code>type</code> 为字符串时，它表示一个 DOM 节点。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#123;
  type: &#39;button&#39;,
  props: &#123;
    className: &#39;button button-blue&#39;,
    children: &#123;
      type: &#39;b&#39;,
      props: &#123;
        children: &#39;OK!&#39;
      &#125;
    &#125;
  &#125;
&#125;</code></pre>

<h4 id="Component-Elements"><a href="#Component-Elements" class="headerlink" title="Component Elements"></a>Component Elements</h4><p>当 element 的 <code>type</code> 为函数或类时，它表示一个 React 组件。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#123;
  type: Button,
  props: &#123;
    color: &#39;blue&#39;,
    children: &#39;OK!&#39;
  &#125;
&#125;</code></pre>

<p>就像描述 DOM 节点，描述组件的 element 依旧是 element。它们之间可以相互嵌套混合。</p>
<hr>
<h3 id="组件封装-Element-树"><a href="#组件封装-Element-树" class="headerlink" title="组件封装 Element 树"></a>组件封装 Element 树</h3><p>当 React 看到 element 的 <code>type</code> 是函数或类时，它会询问组件要渲染什么 element，给它对应的 <code>props</code>。</p>
<p>例如如下 element：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#123;
  type: Button,
  props: &#123;
    color: &#39;blue&#39;,
    children: &#39;OK!&#39;
  &#125;
&#125;</code></pre>

<p>React 会询问 <code>Button</code> 它要渲染什么，而 <code>Button</code> 会返回如下 element：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#123;
  type: &#39;button&#39;,
  props: &#123;
    className: &#39;button button-blue&#39;,
    children: &#123;
      type: &#39;b&#39;,
      props: &#123;
        children: &#39;OK!&#39;
      &#125;
    &#125;
  &#125;
&#125;</code></pre>

<p>React 会重复这个过程直到获得每个组件下面的 DOM 标签。</p>
<p>返回的 element 树可以包含描述 DOM 节点的 element 和描述其他组件的 element。这使您可以在不依赖内部 DOM 结构的情况下编写独立的 UI 部分。</p>
<p>我们让 React 创建、更新和销毁实例，我们使用从组件返回的 element 来描述它们，而 React 负责管理这些实例。</p>
<hr>
<h3 id="组件可以是类或函数"><a href="#组件可以是类或函数" class="headerlink" title="组件可以是类或函数"></a>组件可以是类或函数</h3><p>有三种大致等价的声明组件的方式：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#x2F;&#x2F; 1) 作为接受 props 的函数
const Button &#x3D; (&#123; children, color &#125;) &#x3D;&gt; (&#123;
  type: &#39;button&#39;,
  props: &#123;
    className: &#39;button button-&#39; + color,
    children: &#123;
      type: &#39;b&#39;,
      props: &#123;
        children: children
      &#125;
    &#125;
  &#125;
&#125;);

&#x2F;&#x2F; 2) 使用 React.createClass() 工厂函数
const Button &#x3D; React.createClass(&#123;
  render() &#123;
    const &#123; children, color &#125; &#x3D; this.props;
    return &#123;
      type: &#39;button&#39;,
      props: &#123;
        className: &#39;button button-&#39; + color,
        children: &#123;
          type: &#39;b&#39;,
          props: &#123;
            children: children
          &#125;
        &#125;
      &#125;
    &#125;;
  &#125;
&#125;);

&#x2F;&#x2F; 3) 使用 ES6 class 继承自 React.Component
class Button extends React.Component &#123;
  render() &#123;
    const &#123; children, color &#125; &#x3D; this.props;
    return &#123;
      type: &#39;button&#39;,
      props: &#123;
        className: &#39;button button-&#39; + color,
        children: &#123;
          type: &#39;b&#39;,
          props: &#123;
            children: children
          &#125;
        &#125;
      &#125;
    &#125;;
  &#125;
&#125;</code></pre>

<p>使用 class 来定义组件时，它比函数式组件更强大。它可以保存一些本地状态，并在对应 DOM 节点创建销毁时执行自定义的逻辑。</p>
<p>无论函数或类，它们本质上都是 React 组件。它们接受 props 作为输入，返回 element 作为输出。</p>
<hr>
<h3 id="由上而下-Reconciliation"><a href="#由上而下-Reconciliation" class="headerlink" title="由上而下 Reconciliation"></a>由上而下 Reconciliation</h3><p>调用：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">ReactDOM.render(&#123;
  type: Form,
  props: &#123;
    isSubmitted: false,
    buttonText: &#39;OK!&#39;
  &#125;
&#125;, document.getElementById(&#39;root&#39;));</code></pre>

<p>React 会给 <code>Form</code> 组件 props，获得返回的 element 树。它将逐渐 refine 它对组件树的理解，以简单的原语表示。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">&#123;
  type: Form,
  props: &#123;
    isSubmitted: false,
    buttonText: &#39;OK!&#39;
  &#125;
&#125;

&#x2F;&#x2F; 从 From 找到 Button
&#123;
  type: Button,
  props: &#123;
    children: &#39;OK!&#39;,
    color: &#39;blue&#39;
  &#125;
&#125;

&#x2F;&#x2F; 从 Button 找到 button
&#123;
  type: &#39;button&#39;,
  props: &#123;
    className: &#39;button button-blue&#39;,
    children: &#123;
      type: &#39;b&#39;,
      props: &#123;
        children: &#39;OK!&#39;
      &#125;
    &#125;
  &#125;
&#125;</code></pre>

<p>这部分处理被 React 称作 <code>reconciliation</code>，它在 <code>ReactDOM.render()</code> 或 <code>setState()</code> 时执行。reconciliation 结束后，React 获知最终的 DOM 树，像 <code>react-dom</code> 或 <code>react-native</code> 那样的 <code>render</code> 会采取最小的改动来更新 DOM 节点（或者 React Native 那样特定平台的视图）。</p>
<p>这个逐渐 refining 的过程也是 React 应用易于优化的原因。如果组件树的某些部分变得太大而无法高效地被 React 访问，那么你可以告诉它如果相关的 props 没有改变，就跳过这个 <code>refining</code> 和 <code>diffing</code>。如果 props 是不可变（immutable）的，计算 props 是否改变的速度非常快。所以可以同时使用 React 和 immutability，并且可以用最小的工作提供很大的优化。</p>
<p>只有类组件有实例，并且你不应该直接创建它们，React 为你做了这些。虽然父组件实例访问子组件实例的机制存在，但它们仅用于必要的操作（例如设置焦点在字段上），通常应避免。</p>
<p>React 负责为每个类组件创建一个实例，因此可以用方法和本地状态以面向对象的方式编写组件，但除此之外，实例在React的编程模型中并不是非常重要，并且由 React 本身来管理。</p>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><em>element</em> 是描述 DOM 节点或其它组件的 plain 对象。elememt 可以在 props 中包含其它 elememt。创建 element 很容易。一旦创建后它不可修改。</p>
<p>一个组件可以用几种不同的方式来声明。它可以是一个带有 render() 方法的类。在简单的情况下，它可以被定义为一个函数。无论哪种情况，都需要 props 作为输入，并返回一个 elememt 树作为输出。</p>
<p>一个实例就是在类组件中用 this 引用的。这对于存储本地状态和对生命周期事件做出反应非常有用。</p>
<p>函数式组件没有实例，类组件有实例。</p>
<p>创建 elements 要使用 <code>React.createElement()</code>、<code>JSX</code> 或者一个 element 工厂函数。不要在实际代码中用纯对象写 elements。</p>
<hr>
<h3 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h3><ul>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2014/10/14/introducing-react-elements.html">React Blog: Introducing React Elements</a></li>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2015/02/24/streamlining-react-elements.html">React Blog: Streamlining React Elements</a></li>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/docs/glossary.html">React Doc: React (Virtual) DOM Terminology</a></li>
</ul>
<hr>
<p>注：由于<a target="_blank" rel="noopener" href="https://github.com/facebook/react/pull/4832">安全原因</a>，所有的 React emelents 需要一个额外的 <code>$$typeof: Symbol.for(&#39;react.element&#39;)</code> 字段定义在对象上。</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html">React Blog: React Components, Elements, and Instances</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.ihanai.com/2017/11/gif-vs-mp4.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="寒霭的部落格">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 寒霭的部落格">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/gif-vs-mp4.html" class="post-title-link" itemprop="url">GIF vs MP4</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-29 05:22:07" itemprop="dateCreated datePublished" datetime="2017-11-29T05:22:07+08:00">2017-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-24 00:18:32" itemprop="dateModified" datetime="2022-04-24T00:18:32+08:00">2022-04-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>210</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <table>
<thead>
<tr>
<th>GIF</th>
<th>MP4</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/images/2017/12/tom-and-jerry.gif" alt="tom-and-jerry"></td>
<td><video autoplay loop playsinline muted src="/images/2017/12/tom-and-jerry.mp4"></video></td>
</tr>
<tr>
<td>1 MB</td>
<td>122 KB</td>
</tr>
</tbody></table>
<p>Convert</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ ffmpeg -f gif -i Desktop&#x2F;tom-and-jerry.gif -pix_fmt yuv420p -c:v libx264 -movflags +faststart -filter:v crop&#x3D;&#39;floor(in_w&#x2F;2)*2:floor(in_h&#x2F;2)*2&#39; Desktop&#x2F;tom-and-jerry.mp4</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hanai</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">182k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:32</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdnjs.loli.net/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="//cdnjs.loli.net/ajax/libs/prism/1.27.0/components/prism-core.min.js" integrity="sha256-c9n/9oG7sBeCouNZfRg5tO8VCCQXGPLiDPJNaF5Qgic=" crossorigin="anonymous"></script>
  <script src="//cdnjs.loli.net/ajax/libs/prism/1.27.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-RtKI23ujTCOg3jNK74NK61WGNYbtBWcqh6UKebC2AQo=" crossorigin="anonymous"></script>
  <script src="//cdnjs.loli.net/ajax/libs/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.js" integrity="sha256-K837BwIyiXo5k/9fCYgqUyA14bN4/Ve9P2SIT0KmZD0=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="//cdnjs.loli.net/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"//cdnjs.loli.net/ajax/libs/mermaid/8.14.0/mermaid.min.js","integrity":"sha256-7wT34TI0pEBeEFoi4z+vhuSddGh6vUTMWdqJ2SDe2jg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

<script>
(function () {
  var createContainer = function (xml) {
    var container = document.createElement('div');
    container.className = 'mxgraph';
    container.style = 'max-width:100%;border:1px solid transparent;';
    var attr = {
      highlight: '#0000ff',
      nav: true,
      resize: true,
      toolbar: 'zoom layers lightbox',
      edit: '_blank',
      xml: xml
    };
    container.setAttribute('data-mxgraph', JSON.stringify(attr));
    return container;
  };

  var fetchXml = function (src) {
    return fetch(src).then(function (res) {
      return res.text();
    });
  };

  var insertDrawioGraphElement = function (src, target) {
    return fetchXml(src).then(function (xml) {
      var container = createContainer(xml);
      target.parentNode.insertBefore(container, target);
      target.parentNode.removeChild(target);

      return container;
    });
  }

  var nodes = document.querySelectorAll('.drawio-placeholder');

  if (nodes.length) {
    var jobs = Array.prototype.slice.call(nodes).map(function (node) {
      var src = node.getAttribute('data-src');
      return insertDrawioGraphElement(src, node);
    });
    NexT.utils.getScript('/lib/drawio_viewer.min.js', () => {
      jobs.forEach(function (job) {
        job.then(function (element) {
          try {
            element.innerHTML = "";
            GraphViewer.createViewerForElement(element)
          } catch (e) { throw element.innerHTML = e.message, e; }
        });
      })
    }, window.GraphViewer);
  }
}())
</script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"//cdnjs.loli.net/ajax/libs/mathjax/3.2.0/es5/tex-svg-full.js"}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/disqusjs/1.3.0/disqusjs.css" integrity="sha256-GxdCIOyfxQ1OBfS99qAIJDoGK1ADuBsxhMTqXG82fAY=" crossorigin="anonymous">

<script class="next-config" data-name="disqusjs" type="application/json">{"enable":true,"api":"https://disqus.skk.moe/disqus/","apikey":"FYoVMcKqcN4CqNtu12XmvvZ1VbdbnSv6Vwsm8N6ncNTXWK8ekX3XEzMcuf5qprK4","shortname":"blog-ihanai","js":{"url":"//cdnjs.loli.net/ajax/libs/disqusjs/1.3.0/disqus.js","integrity":"sha256-LVaMHPQ2zLqOc5rXSAfr4d1PIkEGNLyyUTDNPZmTtUw="}}</script>
<script src="/js/third-party/comments/disqusjs.js"></script>

</body>
</html>
